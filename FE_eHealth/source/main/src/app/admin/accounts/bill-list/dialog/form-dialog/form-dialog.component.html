<!-- src/app/admin/accounts/bill-list/dialog/form-dialog/form-dialog.component.html -->

<div class="addContainer">
  <div class="modalHeader">
    <div class="avatarDetails">
      <label class="hoverable" for="tableFileInput">
        <img [src]="billList.img" alt="avatar" width="40" height="40">
      </label>
      <div class="modalTitle">
        {{ dialogTitle }}
      </div>
    </div>
    <button mat-icon-button mat-dialog-close class="modal-close-button" aria-label="Close dialog" type="button"
      (click)="cancel()">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <div mat-dialog-content>
    <form [formGroup]="billListForm" (ngSubmit)="submit()" class="register-form m-4" novalidate>

      <!-- Hàng 1: ID & Patient Name -->
      <div class="row">
        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>ID</mat-label>
            <input matInput formControlName="id" readonly>
            <mat-icon matSuffix>fingerprint</mat-icon>
          </mat-form-field>
        </div>
        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Patient Name</mat-label>
            <input matInput formControlName="patientName" readonly>
            <mat-icon matSuffix>face</mat-icon>
          </mat-form-field>
        </div>
      </div>

      <!-- Hàng 2: Doctor Name & Status -->
      <div class="row">
        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Doctor Name</mat-label>
            <input matInput formControlName="doctorName" readonly>
            <mat-icon matSuffix>perm_identity</mat-icon>
          </mat-form-field>
        </div>
        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Status *</mat-label>
            <mat-select formControlName="status" required>
              <mat-option value="Pending">Pending</mat-option>
              <mat-option value="Paid">Paid</mat-option>
              <mat-option value="Unpaid">Unpaid</mat-option>
              <mat-option value="Cancelled">Cancelled</mat-option>
            </mat-select>
            <mat-error *ngIf="statusControl.hasError('required')">
              Status is required
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <!-- Hàng 3: Date & Tax -->
      <div class="row">
        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Date</mat-label>
            <input matInput [matDatepicker]="picker" formControlName="date" readonly />
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker disabled="false"></mat-datepicker>
            <!-- Không show lỗi vì date là readonly -->
          </mat-form-field>
        </div>
        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Tax</mat-label>
            <input matInput formControlName="tax" readonly>
            <mat-icon matSuffix>description</mat-icon>
          </mat-form-field>
        </div>
      </div>

      <!-- Hàng 4: Discount & Initial Amount -->
      <div class="row">
        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Discount</mat-label>
            <input matInput formControlName="discount" readonly>
            <mat-icon matSuffix>local_activity</mat-icon>
          </mat-form-field>
        </div>
        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Initial Amount *</mat-label>
            <input matInput formControlName="initialAmount" type="number" step="0.01" autocomplete="off"
              placeholder="Enter amount" readonly />
            <mat-icon matSuffix>attach_money</mat-icon>
            <mat-error *ngIf="initialAmountControl.hasError('required')">
              Initial Amount is required
            </mat-error>
            <mat-error *ngIf="initialAmountControl.hasError('min')">
              Amount must be ≥ 0
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <!-- Hàng 5: Total -->
      <div class="row">
        <div class="col-12 mb-3">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Total</mat-label>
            <input matInput formControlName="total" readonly>
            <mat-icon matSuffix>receipt</mat-icon>
          </mat-form-field>
        </div>
      </div>

      <!-- Hàng 5: Nút Save / Cancel -->
      <div class="row">
        <div class="col-12 mb-2 text-right">
          <button mat-flat-button color="primary" [disabled]="billListForm.invalid" type="submit">
            Save
          </button>
          <button mat-flat-button color="warn" type="button" (click)="cancel()" class="ml-2">
            Cancel
          </button>
        </div>
      </div>

    </form>
  </div>
</div>